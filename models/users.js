var mongoose = require('mongoose');
var Schema = mongoose.Schema;
const defProfileURL = "data:image/png;base64,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";

//Image needs more restrictions on it. XSS attacks could probably be exploited.
//Garbage data can also just fill in
var UserSchema = new Schema(
    {   
        googleID: {type:String},
        facebookID: {type:String},
        displayName: {type:String, required:true, max:35},
        firstName: {type:String,max:35},
        lastName: {type:String,max:35},
        gender: {type:String, max:15},
        profileDesc: {type:String, max:140},
        profilePicURL: {type:String,default:defProfileURL,max:7000},
        creationDate: {type:Date, default:Date.now},
        banned: {type:Boolean, default:false},
        banEndDate: {type:Date},
        rating: {type:Number, default:0}
    }
);

UserSchema
.virtual('name')
.get(function(){
    return this.firstName+' '+this.lastName;
});

UserSchema
.virtual('url')
.get(function(){
    return '/users/'+this._id;
});

module.exports = mongoose.model('User', UserSchema);